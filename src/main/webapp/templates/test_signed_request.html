<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->

<div class="row mt20">
    <div class="col-md-12 text-center">
        <h4>Log in</h4>
    </div>
    <div class="col">
        <form id="new-wallet-form">
            <div class="form-group">
                <label for="walletName">Wallet Name</label>
                <input type="text" class="form-control" id="walletName" name="walletName" aria-describedby="walletName" placeholder="Enter wallet name">
            </div>
            <div class="form-group">
                <label for="walletPassword">Wallet Password</label>
                <input type="password" class="form-control" id="walletPassword" name="walletPassword" placeholder="Enter wallet Password">
            </div>
            <div class="form-group">
                <label for="walletName">Wallet index</label>
                <input type="text" class="form-control" id="walletName" name="walletIndex" aria-describedby="walletIndex" placeholder="Enter wallet index">
            </div>
            <div class="form-group">
                <input class="form-control form-check-input radio-button" type="radio" name="walletCypher" id="walletCypher" value="Ed25519BC" checked>
                <label class="form-check-label" for="gridRadios1">
                    ED25519
                </label>
                <br/><br/>
                <input class="form-control form-check-input radio-button" type="radio" name="walletCypher" id="walletCypher" value="BCQTESLA_PS_1_R2">
                <label class="form-check-label" for="gridRadios2">
                    QTESLA Round 2
                </label>
            </div>
            <div class="form-group">
                <label for="walletPassword">Post Type Request</label>
                <select class="form-control">
                    <option value="GET_ADDRESS">GET ADDRESS</option>
                </select>  
            </div>    
            <div class="form-group">
                <label for="uuidv4">uuid</label><!--uuidv4()-->
                <input type="text" class="form-control" id="uuid" name="uuid" aria-describedby="uuid" placeholder="Enter wallet index">
            </div>
            
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#uuid').val(uuidv4());
        $('#new-wallet-form').submit(function (e) {
            e.preventDefault();
            var object = {};
            $('.form-group').each(function (key, val) {
                let jElem = $(val);
                jElem.find('.form-control').each(function (innerElKey, innerElVal) {
                    let innerjElem = $(innerElVal);
                    if (innerjElem.attr('type') === 'radio' && innerjElem.is(':checked') ) {
                        object[innerjElem.attr('name')] = innerjElem.val();
                    } else if(innerjElem.attr('type') === 'text' || innerjElem.attr('type') === 'password') {
                        object[innerjElem.attr('name')] = innerjElem.val();
                    }

                });


            });
            
            console.log(object);

            $.ajax({
                headers: {
                    'Content-Type': "application/json"
                },
                type: 'POST',
                url: 'http://localhost:8080/walletwebversion/resources/javaee8/signedRequest',
                contentType: "application/json",
                dataType: "json",
                data: JSON.stringify(object)
            });
        });
    })

</script>